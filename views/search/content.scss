/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2016 OA Wu Design
 */

@import "_oa";

.search {
  position: relative;
  display: block;
  margin: 0 auto;
  margin-top: 20px;
  max-width: 600px;
  width: 100%;

  input {
    @include input;
    width: 100%;
    padding-right: 40px;
  }
  span {
    position: absolute;
    top: 5px;
    right: 5px;
    display: inline-block;
    width: 30px;
    height: calc(100% - 5px * 2);
    line-height: 19px;
    border-left: 1px solid rgba(39, 40, 34, .300);
    color: rgba(39, 40, 34, .600);
    cursor: pointer;
  }
}

.line {
  position: relative;
  width: 100%;
  height: 30px;
  line-height: 28px;
  margin-top: 50px;

  &:before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    display: inline-block;
    width: 100%;
    height: 1px;
    background-color: rgba(222, 223, 222, 1.00);
  }

  // background-color: rgba(0, 0, 255, 0.2);

  .kind {
    position: absolute;
    top: -30px;
    left: calc(50% - 310px / 2);
    display: inline-block;
    width: 310px;
    @include clearfix();

    label {
      position: relative;
      float: left;
      display: inline-block;
      width: 70px;
      cursor: pointer;
      + label {
        margin-left: 10px;
      }

      input {
        position: absolute;
        left: 0;
        top: 0;
        display: inline-block;
        z-index: 2;
        @include opacity(0);

        &:checked {
          ~ span {
            &:before {
              color: rgba(59, 110, 192, 1.00);
            }
          }
        }
      }
      span {
        position: relative;
        display: inline-block;
        width: 100%;
        height: 100%;
        z-index: 1;
        padding-left: 10px;
        text-align: left;

        &:before {
          @include icomoon-font('frame') { content: "\e905"; };
          position: absolute;
          left: -10px;
          top: 5px;
          display: inline-block;
          width: 16px;
          height: 16px;
          line-height: 16px - 7px;
          padding-left: 2px;
          font-size: 22px;
          border: 1px solid rgba(150, 150, 150, 1.00);
          color: transparent;
          @include border-radius(2px);
          @include transition(color .3s);
        }
      }
    }
  }
  .type {
    position: absolute;
    right: 0;
    top: calc(50% - 30px / 2);
    display: inline-block;
    height: 100%;
    height: 30px;
    line-height: 28px;
    @include clearfix();

    button {
      position: relative;
      float: left;
      border: 1px solid rgba(222, 223, 222, 1.00);
      padding: 3px 10px;
      margin: 0 5px;
      display: inline-block;
      width: 35px;
      height: 100%;
      font-size: 18px;
      color: rgba(102, 102, 102, 1.00);
      background-color: rgba(255, 255, 255, 1.00);
      cursor: pointer;
      @include transition(background-color .3s, border .3s);
      @include border-radius(4px);

      + button {
        margin-left: 0;
      }

      &:before {
        position: absolute;
        left: 0;
        top: 0;
        display: inline-block;
        width: 100%;
        height: 100%;
        line-height: 28px;
      }
      &:hover {
        background-color: rgba(235, 235, 235, 1.00);
      }
      &:active {
        background-color: rgba(220, 220, 220, 1.00);
      }
      &.a {
        color: rgba(241, 241, 241, 1.00);
        border: 1px solid rgba(102, 102, 102, 1.00);
        background-color: rgba(102, 102, 102, 1.00);
      }
      &:focus {
        outline: 0;
      }
    }
  }
  @media screen and (min-width: 0) and (max-width: #{$mediaMiniMobileWidth - 1px}) {
    height: 50px;
  }
  @media screen and (min-width: 0) and (max-width: #{365px - 1px}) {
    height: 70px;
    .kind {
      padding: 0 10px;
      padding-right: 100px;

      label {
        width: calc(50% - 10px);
        margin-left: 10px;
      }
    }
    .type {
      top: -18px;
    }
  }
}
.line {
  ~ .works {
    display: inline-block;
    figure {
      display: none;
      &.s {
        display: inline-block;
      }
    }
  }
  &.li {
    ~ .works {
      width: 100%;
      padding: 10px;
      figure {
        width: calc(100% - 15px * 2);
        margin: 15px;

        text-align: left;
        @include clearfix();

        + figure {
          margin-top: 25px;
        }
        > h2 {
          display: inline-block;
          float: left;
          width: 100%;
          border-bottom: 1px solid rgba(39, 40, 34, .100);
          font-size: 18px;
          line-height: 23px - 2px;
          padding: 5px;
          padding-bottom: 10px;
          margin-bottom: 17px;
          color: rgba(65, 65, 65, 1);
          @include clearfix();

          &:before {
            float: left;
            display: inline-block;
            margin-right: 4px;
            color: rgba(135, 135, 135, 1);
            width: 23px;
            height: 23px;
            text-align: center;
            font-size: 13px;
            border: 1px solid rgba(135, 135, 135, .5);
            @include border-radius(50%);
          }
          a {
            float: left;
            display: inline-block;
            max-width: calc(100% - 100px - 23px - 4px);
            text-decoration: none;
            color: rgba(65, 65, 65, 1);
            overflow: hidden;
          }
          time {
            float: right;
            display: inline-block;
            width: 100px;
            font-size: 13px;
            text-align: right;
            color: rgba(135, 135, 135, 1);
          }
        }
        > a {
          display: inline-block;
          float: left;
          width: 150px;
          height: 130px;
          margin-left: 20px;
          margin-right: 20px;
          margin-bottom: 10px;
          @include border-radius(2px);
          img {
            width: 100%;
          }
        }
        figcaption {
          font-size: 14px;
          padding: 10px;
          color: rgba(100, 100, 100, 1);

          // border: 1px solid rgba(255, 0, 0, .3);
          a {
            @include a;
            font-size: 10px;
            margin-top: 5px;

            &:before {
              content: '詳細內容 »';
            }
          }
        }
      }
      @media screen and (min-width: 0) and (max-width: #{$mediaMobileWidth - 1px}) {
        padding: 0;
        figure {
          width: 100%;
          margin-right: 0;
          margin-left: 0;
          > h2 {
            a {
              @include overflow-docx3();
              max-width: 100%;
            }
            time {
              display: none;
            }
          }
        }
      }
      @media screen and (min-width: 0) and (max-width: #{$mediaMiniMobileWidth - 1px}) {
        figure {
          position: relative;
          overflow: hidden;
          @include border-radius(3px);
          @include box-shadow(0 0 1px rgba(0, 0, 0, .5));

          > a {
            width: 100%;
            margin: 0;
            height: 150px;
          }
          > h2 {
            position: absolute;
            top: 150px - 40px;
            left: 0;
            display: inline-block;
            width: 100%;
            height: 40px;
            margin: 0;
            border: 0;
            
            @include background-image(
                          linear-gradient(
                              rgba(39, 40, 34, 0) 0%,
                              rgba(39, 40, 34, .7) 100%
                          ));
            &:before {
              color: rgba(230, 230, 230, 1);
              border-width: 0;
              padding-top: 2px;
            }
            a {
              color: rgba(230, 230, 230, 1);
              @include text-shadow(1px 1px 3px rgba(39, 40, 34, .5));
            }
          }
          figcaption {
            position: relative;
            display: inline-block;
            width: 100%;
            max-height: 200px;
            padding: 10px 0;
            overflow: hidden;

            a {
              position: absolute;
              bottom: 0;
              left: 0;
              display: inline-block;
              width: 100%;
              height: 100%;

              @include background-image(
                            linear-gradient(
                                rgba(255, 255, 255, 0) 0%,
                                rgba(255, 255, 255, 0) 30%,
                                rgba(255, 255, 255, 1) 74%,
                                rgba(255, 255, 255, 1) 100%
                            ));
              &:before {
                position: absolute;
                bottom: 10px;
                left: calc(50% - 130px / 2);
                text-align: center;
                display: inline-block;
                width: 130px;
                padding: 5px 10px;
                color: rgba(59, 110, 192, 1.00);
                overflow: hidden;
                background-color: rgba(255, 255, 255, 1);
                @include border-radius(2px);
                @include box-shadow(0 0 1px rgba(0, 0, 0, .7));
              }
            }
          }
        }
      }
    }
  }
  &.cr {
    ~ .works {
      @media screen and (min-width: 0) and (max-width: #{610px - 1px}) {
        figure {
          width: 120px;
          height: 120px + 20px + 5px;
          h2 {
            width: 120px;
            height: 20px;
          }
          > a {
            width: 120px;
            height: 120px;
          }
        }
      }
      @media screen and (min-width: 0) and (max-width: #{375px - 1px}) {
        width: 2 * (120px + 10px * 2);
        figure {
          margin: 20px 10px;
        }
      }
      @media screen and (min-width: 375px) and (max-width: #{435px - 1px}) {
        width: 2 * (120px + 20px * 2);
        figure {
          margin: 20px 20px;
        }
      }
      @media screen and (min-width: 435px) and (max-width: #{610px - 1px}) {
        width: 3 * (120px + 10px * 2);
        figure {
          margin: 20px 10px;
        }
      }

      @media screen and (min-width: 610px) {
        figure {
          height: 150px + 25px + 5px;
          margin: 20px;
          h2 {
            width: 150px;
            height: 25px;
          }
          > a {
            width: 150px;
            height: 150px;
          }
        }
      }

      @media screen and (min-width: 610px) and (max-width: #{800px - 1px}) {
        width: 3 * (150px + 20px * 2);
      }
      @media screen and (min-width: 800px) and (max-width: #{$mediaTabletWidth - 1px}) {
        width: 4 * (150px + 20px * 2);
      }
      @media screen and (min-width: $mediaTabletWidth) and (max-width: #{1050px - 1px}) {
        width: 3 * (150px + 20px * 2);
      }
      @media screen and (min-width: 1050px) and (max-width: #{1240px - 1px}) {
        width: 4 * (150px + 20px * 2);
      }
      @media screen and (min-width: 1240px) {
        width: 5 * (150px + 20px * 2);
      }
      
      @include clearfix();
      
      figure {
        float: left;
        position: relative;

        h2 {
          display: inline-block;
          position: absolute;
          bottom: 0;
          left: 0;

          font-size: 14px;
          padding: 3px;
          margin: 0;

          &:before {
            margin-right: 4px;
            display: inline-block;
            width: 15px;
            height: 15px;
            color: rgba(135, 135, 135, 1);
          }

          a {
            color: rgba(85, 85, 85, 1);
            text-decoration: none;
            display: inline-block;
            max-width: calc(100% - 15px - 4px);
            height: 100%;
            @include transition(color .3s);
            @include overflow-docx3();

            &:hover {
              color: rgba(45, 45, 45, 1);
            }
          }
          time {
            display: none;
          }
        }
        > a {
          display: inline-block;
          border: 5px solid rgba(255, 255, 255, 1.00);
          @include box-shadow(0 0 1px rgba(0, 0, 0, .500), inset 0 0 2px rgba(0, 0, 0, .500));
          @include border-radius(50%);
          overflow: hidden;

          img {
            width: 100%;
          }
        }
        figcaption {
          display: none;
        }
      }
    }
  }
}

.suggest {
  position: relative;
  overflow: hidden;
  margin-top: 35px;

  $tagCount: 5;
  $tagRunTime: 6.5s;

  $tagsTopPaddingMini: 30px + 10px;
  $tagHeightMini: 50px;

  $tagsTopPadding: 50px + 10px;
  $tagHeight: 60px;
  @media screen and (min-height: 0) and (max-height: #{$mediaMobileWidth - 1px}) {
    height: $tagHeightMini * $tagCount + $tagsTopPaddingMini * 2;
  }
  @media screen and (min-height: $mediaMobileWidth) {
    height: $tagHeight * $tagCount + $tagsTopPadding * 2;
  }

  &:before {
    content: '您可以試著搜尋..';
    position: absolute;
    top: 0;
    left: calc(50% - 200px / 2);
    display: inline-block;
    width: 200px;
    height: 35px;
    font-size: 20px;
    color: rgba(50, 50, 50, 0.7);
    letter-spacing: 3px;
  }

  a {
    position: absolute;
    top: 0;
    display: inline-block;
    padding: 0 20px;
    color: rgba(50, 50, 50, 0.7);
    text-decoration: none;
    letter-spacing: 1px;
    cursor: pointer;

    @include opacity(0);
    @include transition(top 1.2s, opacity 1.2s);

    @media screen and (min-height: 0) and (max-height: #{$mediaMobileWidth - 1px}) {
      padding-top: 15px;
      height: $tagHeightMini;

      @for $i from 1 through 10 {
        &:nth-child(#{$i}) {
          top: $tagHeightMini * (3 * ($i % 5) + ($tagCount + 1)) + $tagsTopPaddingMini;

          &.start {
            top: $tagHeightMini * ($i % 5) + $tagsTopPaddingMini;
            @include opacity(1);
          }
          &.end {
            @include opacity(0);
            top: $tagHeightMini * (2 * (($i % 5) - ($tagCount + 1))) + $tagsTopPaddingMini;
          }
          &.back {
            @include opacity(0);
            @include transition(none);
          }
        }
      }
    }
    @media screen and (min-height: $mediaMobileWidth) {
      padding-top: 20px;
      height: $tagHeight;

      @for $i from 1 through 10 {
        &:nth-child(#{$i}) {
          top: $tagHeight * (3 * ($i % 5) + ($tagCount + 1)) + $tagsTopPadding;

          &.start {
            top: $tagHeight * ($i % 5) + $tagsTopPadding;
            @include opacity(1);
          }
          &.end {
            @include opacity(0);
            top: $tagHeight * (2 * (($i % 5) - ($tagCount + 1))) + $tagsTopPadding;
          }
          &.back {
            @include opacity(0);
            @include transition(none);
          }
        }
      }
    }

    @media screen and (min-width: 0px) and (max-width: #{$mediaMobileWidth - 1px}) {
      $paddingH: 50px;
      left: $paddingH / 2;
      width: calc(100% - #{$paddingH});
    }
    @media screen and (min-width: $mediaMobileWidth) and (max-width: #{$mediaTabletWidth - 1px}) {
      $paddingH: 100px;
      left: $paddingH / 2;
      width: calc(100% - #{$paddingH});
    }
    @media screen and (min-width: #{$mediaTabletWidth}) {
      $paddingH: 150px;
      left: $paddingH / 2;
      width: calc(100% - #{$paddingH});
    }
    
    @include overflow-docx3();
    &:not(:nth-child(5n)) {
      &:before {
        content: '';
        position: absolute;
        top: -1px;
        left: 0;
        display: inline-block;
        width: 100%;
        height: 2px;
        @include background-image(radial-gradient(50% 50%, rgba(0, 0, 0, .3) 0px, rgba(0, 0, 0, 0) 100%));
      }
    }
  }
}

.search.no {
  ~ .works {
    display: none;
  }
  ~ .line {
    display: none;
  }
  ~ .suggest {
    display: block;
  }
}
.search.yes {
  ~ .works {
    display: inline-block;
  }
  ~ .line {
    display: inline-block;
  }
  ~ .suggest {
    display: none;
  }
}